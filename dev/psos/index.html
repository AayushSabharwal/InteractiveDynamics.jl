<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Poincaré Surface of Section · InteractiveChaos</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="https://fonts.googleapis.com/css?family=Montserrat|Source+Code+Pro&amp;display=swap" rel="stylesheet" type="text/css"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">InteractiveChaos</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li><a class="tocitem" href="../od/">Orbit Diagram</a></li><li class="is-active"><a class="tocitem" href>Poincaré Surface of Section</a><ul class="internal"><li><a class="tocitem" href="#Docstrings-1"><span>Docstrings</span></a></li><li><a class="tocitem" href="#Function-Video-1"><span>Function Video</span></a></li><li><a class="tocitem" href="#Video-Tutorial-1"><span>Video Tutorial</span></a></li></ul></li><li><a class="tocitem" href="../highlight/">Trajectory Highlighter</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Poincaré Surface of Section</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Poincaré Surface of Section</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDynamics/InteractiveChaos.jl/blob/master/docs/src/psos.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Interactive-Poincaré-Surface-of-Section-1"><a class="docs-heading-anchor" href="#Interactive-Poincaré-Surface-of-Section-1">Interactive Poincaré Surface of Section</a><a class="docs-heading-anchor-permalink" href="#Interactive-Poincaré-Surface-of-Section-1" title="Permalink"></a></h1><h2 id="Docstrings-1"><a class="docs-heading-anchor" href="#Docstrings-1">Docstrings</a><a class="docs-heading-anchor-permalink" href="#Docstrings-1" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="InteractiveChaos.interactive_poincaresos" href="#InteractiveChaos.interactive_poincaresos"><code>InteractiveChaos.interactive_poincaresos</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">interactive_poincaresos(cds, plane, idxs, complete; kwargs...)</code></pre><p>Open an interactive application for exploring a Poincaré surface of section (PSOS) of the continuous dynamical system <code>cds</code>. Return an observable containing the latest initial state created by <code>complete</code>, as well as its color.</p><p>The <code>plane</code> can only be the <code>Tuple</code> type accepted by <code>DynamicalSystems.poincaresos</code>, i.e. <code>(i, r)</code> for the <code>i</code>th variable crossing the value <code>r</code>. <code>idxs</code> gives the two indices of the variables to be displayed, since the PSOS plot is always a 2D scatterplot. I.e. <code>idxs = (1, 2)</code> will plot the 1st versus 2nd variable of the PSOS. It follows that <code>plane[1] ∉ idxs</code> must be true.</p><p><code>complete</code> is a three-argument <strong>function</strong> that completes the new initial state during interactive use, see below.</p><p>The function returns: an observable containing the latest initial <code>state</code> and the <code>scene</code> that is plotted. The scatter plot is <code>scene.children[2]</code>.</p><p><strong>Keyword Arguments</strong></p><ul><li><code>direction, rootkw</code> : Same use as in <code>DynamicalSystems.poincaresos</code>.</li><li><code>tfinal</code> : A 2-element tuple for the range of values for the total integration time (chosen interactively).</li><li><code>Ttr</code> : A 2-element tuple for the range of values for the transient integration time (chosen interactively).</li><li><code>markersizes = (-4, -1)</code> : A 2-element tuple for the range of the marker sizes (which scale exponentially: the actual size is <code>10.0^markersize</code>).</li><li><code>color</code> : A <em>function</em> of the system&#39;s initial condition, that returns a color to plot the new points with. A random color is chosen by default. Notice that for type stability reasons this function must return an instance of <code>RGBf0(red, green, blue)</code>.</li><li><code>labels = (&quot;u₁&quot; , &quot;u₂&quot;)</code> : Axis labels.</li><li><code>diffeq...</code> : Any extra keyword arguments are passed into <code>init</code> of DiffEq.</li></ul><p><strong>Interaction</strong></p><p>The application is a standard AbstractPlotting scatterplot, which shows the PSOS of the system, initially using the system&#39;s <code>u0</code>. Two sliders control the final evolution time and the size of the marker points.</p><p>Upon clicking within the bounds of the scatter plot your click is transformed into a new initial condition, which is further evolved and its PSOS is computed and then plotted into the scatter plot.</p><p>Your click is transformed into a full <code>D</code>-dimensional initial condition through the function <code>complete</code>. The first two arguments of the function are the positions of the click on the PSOS. The third argument is the value of the variable the PSOS is defined on. To be more exact, this is how the function is called:</p><pre><code class="language-julia">x, y = mouseclick; z = plane[2]
newstate = complete(x, y, z)</code></pre><p>The <code>complete</code> function can throw an error for ill-conditioned <code>x, y, z</code>. This will be properly handled instead of breaking the application. This <code>newstate</code> is also given to the function <code>color</code> that gets a new color for the new points.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDynamics/InteractiveChaos.jl/blob/deca1b534c4b5e3d7d97ed331f136408cf57d953/src/poincareclick.jl#L3-L57">source</a></section></article><h2 id="Function-Video-1"><a class="docs-heading-anchor" href="#Function-Video-1">Function Video</a><a class="docs-heading-anchor-permalink" href="#Function-Video-1" title="Permalink"></a></h2><pre><code class="language-julia">using InteractiveChaos, Makie

ds = Systems.henonheiles()

potential(x, y) = 0.5(x^2 + y^2) + (x^2*y - (y^3)/3)
energy(x,y,px,py) = 0.5(px^2 + py^2) + potential(x,y)
const E = energy(get_state(ds)...)

function complete(y, py, x)
    V = potential(x, y)
    Ky = 0.5*(py^2)
    Ky + V ≥ E &amp;&amp; error(&quot;Point has more energy!&quot;)
    px = sqrt(2(E - V - Ky))
    ic = [x, y, px, py]
    return ic
end

chaotic = get_state(ds)
stable = [0., 0.1, 0.5, 0.]

plane = (1, 0.0)

psos = interactive_poincaresos(ds, plane, (2, 4), complete; markersizes = (-5, -1))</code></pre><video width="100%" height="auto" controls autoplay loop>
<source src="https://raw.githubusercontent.com/JuliaDynamics/JuliaDynamics/master/videos/interact/interactive_psos.mp4?raw=true" type="video/mp4">
</video><h2 id="Video-Tutorial-1"><a class="docs-heading-anchor" href="#Video-Tutorial-1">Video Tutorial</a><a class="docs-heading-anchor-permalink" href="#Video-Tutorial-1" title="Permalink"></a></h2><iframe width="560" height="315" src="https://www.youtube.com/embed/SozXxa7blJs" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../od/">« Orbit Diagram</a><a class="docs-footer-nextpage" href="../highlight/">Trajectory Highlighter »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 12 March 2020 16:33">Thursday 12 March 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
